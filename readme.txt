=============================================================================
                              フリーズオワタ+1
                           －ソースリスト説明書－
=============================================================================
　本アプリは347氏作オワタブラウザrev161をベースにKMA氏【◆ud9ZKP/tmI】が改造
したFreeze owata(100331版)のレス書き機能に拙作PSPメモ帳Ver1.10を適用したバー
ジョンです。


１.プログラムについて
￣￣￣￣￣￣￣￣￣￣￣
 　ソースリストを見るときはタブ幅4文字、折り返し120文字以上にすると見やすい
 かもしれません。

 　下記はオワタブラウザのソースに対して修正を行った部分です。
 なお、ここに記述した部分以外にも手を入れている場合もあります。

 「SMEMO」 …………… PSPメモ帳関連のソース
 「unzip」 …………… .zipファイル展開関連のソース
 「unrarlib」………… .rarファイル展開関連のソース
 main.c  ……………… フリーズオワタのmain（色々修正）
                      スリープ監視スレッド追加
 pg.c  ………………… pgPrintTitleBar()でスレ容量を表示するように修正
                      pgCountHtml()とpgPrintHtml()で不完全なタグの読み飛ばしで
                      問題が起こるので修正
                      idEnd(),resEnd(),urlEnd()のアンカー上限処理を修正
                      pgExtraFontInit()のエラーメッセージ処理を変更
                      pgPrintHtml()でhttps://をURLアンカーとして扱うよう修正
                      およびBe関連処理追加
                      idEnd(),urlEnd()でアンカーの長さが12以下の時は12以上に
                      なるように補正
                      pgCursorColorSet()でカーソルイメージを５種類に
                      pgPadCursor()にカーソルの種類を指定できるようにする
 psp2ch.c  …………… psp2chStart()のタイトル表示内容を修正
                      psp2chInit()のエラーメッセージ処理を変更
                      psp2chInputDialog()の履歴処理を変更、ｶﾅ入力処理を追加
                      psp2chLInput()を追加（PSPメモ帳のライン入力呼び出し）
 psp2ch.h  …………… S_2CH_CONFIG,S_2CH_RES,S_2CH_HEADER_COLOR構造体に項目を
                      追加
 psp2chMenu.c  ……… いろいろ修正
 psp2chIni.c ………… psp2chIniLoadConfig()とpsp2chIniSetColor()で読む項目を
                      追加
 psp2chForm.c  ……… フリーズオワタのレス書き込み処理をPSPメモ帳を使うように
                      前回のレス書き時刻からの経過時間を表示
                      samba24の警告メッセージから規定時間を自動取得
                      psp2chFormResPost()にてcookie内HAP値を保存するように修正
                      およびBe関連処理の書き直し
                      psp2chFormBeLogin()、psp2chFormBeLogout()、psp2chFormBeL
                      oginCheck()を追加
 psp2chRes.c ………… psp2chReadIdx()の戻り値がおかしい場合があったので修正
                      psp2chResCopy()でPSPメモ帳のクリップボードへコピーを行う
                      psp2chResParser()でレスアンカーに関する処理を追加
                      psp2chDrawResHeader()でレス番色が変わるよう修正、ID表示
                      色も修正、IDの出現数を表示可能に、Be表示追加
                      psp2chCountRes()をpsp2chDrawResHeader()に合わせて修正
                      psp2chRes()でレス元抽出追加
                      DATファイル保存先フォルダ名を板名と板アドレスで切り替え
                      られるように
                      あちこちでNG時の処理を修正
                      板移転時の処理を修正
                      URLリンクを踏んだときの処理を変更
                      Be関連処理追加
                      カーソルジャンプモードによりカーソル形状を変えるように
                      psp2chResJump()に外部板の登録機能を追加、スレッド一覧へ
                      の移行処理を追加
                      psp2chResCursorMove()で右側画面外のアンカーを無視させる
                      psp2chResResetAnchors(),psp2chResSetAnchorList()にBeアン
                      カー処理追加
 psp2chThread.c  …… psp2chSort()とかでソート項目を追加
                      psp2chDrawThread()で表示項目に勢い値を追加、カーソル行タ
                      イトルをスクロールするようにする
                      psp2chThread()に強制画面更新を追加、スレ立て時に立てたス
                      レを検索するように
                      DATファイル保存先フォルダ名を板名と板アドレスで切り替え
                      られるように
                      psp2chThreadList()にスレタイNGを追加
 psp2chIta.c ………… psp2chIta()に強制画面更新を追加
                      カーソルが画面範囲外になっている場合は画面内になるように
                      表示位置を修正させる
 psp2chFavorite.c  … psp2chFavSort()とかでソート項目を追加
 psp2chResWindow.c … psp2chAnchorSearch()を追加
                      psp2chResAnchor()いろいろ修正
                      psp2chUrlAnchor()でキャッシュの読み込み時にメモリ確保でき
                      なかった場合にメッセージを出すように
 psphtmlviewer.c …… タブ数を可変に
                      ブラウザで使用するメモリを出来るだけ大きなサイズで確保す
                      るように変更
 psp2chImageView.c … psp2chImageViewGif()を自動ループ化、合わせてpsp2chImage
                      Viewer()も修正
                      全体的にあちこち修正
 psp2chNet.c ………… psp2chNetInit()でモジュールのロードに失敗したときの処理
                      を変更
                      psp2chSendRequest()が終了するときnet->bodyをNULLにするよ
                      うにする
                      psp2chGetHttpHeader()のクッキー値取得処理を変更
                      psp2chPost()でBasic認証に対応
 psp2chAudio.c ……… psp2chAudioInit()でモジュールのロードに失敗したときの処理
                      を変更
                      psp2chPlayEnd()の処理を色々変更
                      psp2chAudioInit()にてplay_threadのスタックサイズを0x1000
                      から0x2000へ増量
 charConv.c  ………… UTF8→シフトJIS変換を追加
                      psp2chUCS2SJIS()にてシフトJISに変換できない文字だった場合
                      は'■'にするように変更
                      Base64変換（psp2chBase64()）を追加
 cptbl.h ……………… シフトjis-unicode変換テーブルにunicode0xA1,0xA2,0xA5を
                      追加
 psp2chReg.c ………… psp2chRegGetStr()にて取得した以上のregionの項目№が指定
                      されていた場合、文字列長0を返すように変更
                      psp2chFormGetPattern()にて応答時刻をPSP内時計-300秒から
                      -900秒へ
 psp2chSearch.c  …… psp2chSearchList()の全板検索件数を可変に
 Makefile  …………… ソースリスト追加、毎回PARAM.SFOを作成するように修正


２.簡単な解説
￣￣￣￣￣￣￣
 　ソースレベルで融合させるのは開発効率が悪いので本来ならPSPメモ帳は.prxで
 外部モジュール化すべきなんだけど、まだ外部モジュール化の実験を行ってないので
 オワタブラウザ+1に引き続き今回もこんな事をやってます。
 一部関数名が競合したものがありましたが、それはPSPメモ帳側の関数名を変更して
 対応しました。

 　PSPメモ帳側のメインとなるsmemomain.c内SMEMOmain()はかなりの修正が行われてい
 ますが、他の主要な部分には（intraFont関連を除き）修正は行われていません。

 　今回はintraFontの扱いが面倒なのと利用価値が無いという事でintraFont関連は削除
 しました。
 これに関連してシフトJISコード－UCSコード変換をlibcccからフリーズオワタ付属の
 charConvへ変更しています。
 こちらを使用したほうがメモリの節約になるっぽい？

 　モナーフォントとSimple IMEの漢字変換辞書はフリーズオワタ起動時に読み込み、
 終了時に開放するように変更しています。
 おかげでメモ帳の起動が一瞬でできるようになりましたが、一方でフリーズオワタで
 使えるメモリが2Mbyteほど少なくなっています。
 モナーフォントの管理はフリーズオワタ側とメモ帳側とで別々に行っているので少々
 メモリが無駄になっています。
 これはフリーズオワタとメモ帳とでは使用している画面モードが異なっているため、
 作画処理を両立させられないからです。

 　動作確認はそれほど厳密には行っていないので、なにかしら問題点が潜んでいるかも
 しれませんのでご注意ください。


 Rev.20100513追記
  　メモ帳を起動させた後にフリーズ側のカーソルが消える場合があったのは、VRAMの
  未使用部分をメモ帳側では画面スクロール時のバッファとして使い、フリーズ側では
  カーソルイメージの保管用として使っていたため起こった不都合でした。
  　現在はメモ帳から戻った時にカーソルイメージを再設定するように修正していま
  す。


 Rev.20100601追記
 　主にBGMファイラーの機能強化を行っています。
 フリーズオワタのBGMファイラーはBGM選択に留まらず各種画像ファイルも開ける優れ
 ものなんですが、折角テキストエディタが使えるんだからって事でPSPメモ帳との連携
 も行うようにしました。
 更にファイル削除機能を強化してフォルダも消せる様にしています。
 フォルダ削除は不用意に使うと本当にバッサリ削除するので注意が必要です。

 　したらば掲示板で「スレ情報をコピー」が出来なかった原因はサーバー側フォルダ
 構成の違いによるもので、DIR名がcomputer/10298の様にフォルダ階層形式になってし
 まうためファイルの書き込みに失敗していました。
 修正としてはファイル名生成時に余計な'/'を'-'に置き換える事で回避を行っていま
 す。


Rev.20100607追記
 　バグフィックス版です。
 したらば掲示板の問題を修正した際に発生した問題の修正（余計な'/'が無かった場合
 を考慮し忘れていた）と、DAT落ちしたスレの.idxを生成するときにフリーズが発生す
 る問題の修正（正しい戻り値が設定されていなかった）を行っています。


Rev.20100625追記
 　某スレで要望があった機能の追加を主に行っています。
 　samba24の連投規制は各サーバで設定値が違うのだが、今の実装では設定値の取得
 は行っていません。
 連投規制には各自が人力で対応してくださいませ。
 一応規制に掛かった時のエラーメッセージから設定値を取得する方法も考えたんだけど
 設定値の管理がなんか面倒だったんで実装してません。
 　もし厳密に管理するのなら各サーバ毎に個別にsamba24設定値と最終アクセス時間
 を記録しなくちゃならないです。


Rev.20100708追記
 　「!vip2:heal:」等のスレストが行われたときのメッセージで「MPが足りません。(4
 13/」とか表示されるんだけど、DATファイルを見るとこの後に「<!DOCTYPE)」という
 妙なタグ？が付いていて、この不完全性が原因でフリーズが起こってました。
 これって「<!DOCTYPE>)」の間違いなんじゃないかなぁ？


Rev.20100709追記
 　レスアンカー先のレス番の色を変えるようにしました。
 範囲指定（「>>20-23」）や複数指定（「>>4,8,12」）、およびこれらの複合指定にも
 対応…してるはず。
 複数指定は2ch自体は対応してないけど良く使われるので。


Rev.20100710追記
 　Rev.20100625で追加したsamba24対策をまともにしてみた。
 書き込み時に各サーバでsamba24警告メッセージがでたらそのメッセージから規定時間
 を自動取得するようにしているので、一度警告を受けないと時間カウントが行われま
 せん。
 　頻繁に書き込みを行う板は限られてると思うから、全てのサーバの設定値を保持して
 おく必要はないよね？
 ちなみに設定値が保持できるサーバの数は49個までなのでご注意。

 　レス元抽出はやってみたら意外と簡単にできてしまった。
 抽出処理はレス番号の色を変える時のヤツが使えるので良いとして画面表示系をどう
 するかが問題だと思ってたんだけど、ある時ID抽出ウィンドウの処理をそのまま利用
 すればいいって事に気が付いた。
 操作感も統一できるのでとても手抜き実装をしているようには見えないでしょう？。


Rev.20100719追記
 　主にバグフィクス。スクロールバーが消えるとかカーソルが消えないとか。
 　メニューでスクロールバーが消えるのはケアレスミスらしい。
 スクロールバー構造体が渡されているのに作画処理をしてなかったから。
 　抽出ウィンドウ外のカーソルが消えなかったのはやっつけで実装してたから…かな。
 ここの内部処理にはいろいろつっこみ所があるんだけど、取り合えず動いてるからお
 っけー。今更組みなおしても大して意味ないし。

 　あといろいろ設定を変えられるようにしたり。
 この辺は既に機構が存在してるので項目追加は実に簡単なのです。オワタブラウザ
 製作者様に感謝。


Rev.20100722追記
 　「orzタワー」の容量落ちアタックへの対策は一応されてはいたんだけど、対応方法
 がまずかった。上限に達したらカウンタを0にするんじゃなくて上限でカンストさせる
 べきだったね。
 まぁこういう非常識な状況への対処をどうするかは難しい問題なのでそう一概には言
 えないのだけど。

 　NGスレタイ機能は…やっつけです。
 多分このままだと使いづらいだろうなぁとは思うものの、他のNG機能でも同じ問題が
 あるのに特に不満は出てないようだから大丈夫だろ。

 　スレ立てスレの自動検索は…デバグしてません。クソスレを立てる訳にはいきませ
 んから。
 問題になりそうなのはスレ立てを行った直後にスレ一覧を更新した場合、本当にその
 一覧内に該当スレが存在するのか？って事。
 スレ一覧の内容が瞬時に更新されてるのなら問題は無いんだけど、更新にタイムラグ
 があると現在のアルゴリズムではうまくいかない…というか確実な方法が無い？んだ
 よね。

 　スレ一覧のカーソル行タイトルスクロールですが、ドット単位でのスクロールは内部
 構造の関係から非常に困難なため文字単位スクロールとなりました。
 これはアナログパッドが使えない人向けなのでデフォルトでは無効となってます。


Rev.20100723追記
 　アンカー処理はスレ表示を行いながら種類別に別々に取得した後、画面上での位置
 に従ってソートしながら一つの配列に統合している。
 この統合段階での配列数リミットチェックが行われていなかったため「orzタワー」に
 やられた訳か。
 前回では個別取得側の問題と勘違いしてたためアンカーがうまく動かなくなった。
 …しかし、となるとあのカウンタの処理概念が良く分からなくなるんだよなぁ。
 ループバッファ的な事をやってるのかなぁ。


Rev.20100728追記
 　稀にアプリが起動しないという話があったもののずっと原因が分からなかったんだ
 けど、多分フォントファイルのロードに失敗してたんだね。
 ただ、アーカイブを素直に展開してれば問題は起こらないのでアプリが起動しなかった
 人はどんなセットアップの仕方をしてたんだろう？
 　フリーズの原因は単純明快、フォントが使えないのに使えないフォントでエラー
 メッセージを表示しようとしていたから。
 現在はPSPメモ帳に内蔵されている東雲フォントでメッセージを出すようにしていま
 す。

 　strtol()で文字列を数値に変換する場合に先頭文字が漢字や記号だった場合、0が返
 されると思ってたらそうとも限らないらしい。LONG_MAXあたりが返されるのかな？
 sscanf()で数値変換する場合も同じらしい。

 　アニメーションGIFはなんか表示が遅いと思ったらフレーム間ウェイトが0.25秒固定
 だったんだね。
 今は指定された時間ウェイトをかけるようにしているけど、やっぱり大きな画像だと
 処理落ちが起きてしまう。
 まぁこれは毎回GIFを展開しながら表示しているのが悪いので、予め全て展開してから
 アニメーションを行えば速度の問題はクリアできるんだけど、そうすると今度はメモリ
 の問題が出てくるのでそう簡単にはいかないんだよね。


Rev.20100729追記
 　元々アニメーションGIF再生時のウェイトは画像展開処理時間を考慮していなかった
 ため無駄に時間待ちを行っていたので、その辺を考慮するようにしてみました。
 また、時間待ち中のキー入力処理も行われていなかったので合わせてそこも修正して
 ます。
 とはいえ、縦方向に長い動画ではやっぱり処理落ちしてしまう。
 これは画像展開に時間がかかっているためなので、これ以上は抜本的な修正が必要と
 なります。
 でも…なんか画像展開に時間がかかりすぎてる気がするんだよなぁ。
 本当にこれが限界なのかなぁ。
 昔の16bit機ですらそれなりの速度で展開できてた気がするんだよなぁ。


Rev.20100803追記
 　HTMLブラウザの使用メモリはこちら側で確保したものをブラウザに渡しているんだ
 よね。
 これまではメモリの確保に失敗しないように小さめに（8MB）確保されていたので、
 現在は24MBから0.1MB単位で小さくしながらメモリ確保にトライしていき成功した時点
 でそのメモリをブラウザに渡すようにしました。

 　やはりきちんと処理を行ってやればアニメーションGIF如きに処理落ちなんてしない
 程度の実力はありますよねー。
 　基本的には事前に画像を展開しておき、表示する際には必要最低限の処理のみにする
 事で処理落ちを回避してます。
 問題はメモリの節約ですが、まぁPSPのメモリ容量ならもしかすると何も考えなくても
 何とかなってしまうかもしれなかったけれど、一応ベタ画像に展開した場合に比べて
 1/4に省メモリ化しています。
 GIF画像を展開するとまずパレット画像（1byte/1dot）が取得でき、これをパレット
 テーブルに従って変換するとベタ画像（4byte/1dot）が取得できます。
 今回の実装では予めパレット画像のみを取得しておき、ベタ画像への変換は表示の際
 に毎回その場で行うようにしています。
 アニメーション中に画面スクロールを行うと引っ掛るのはこの変換処理によるもので
 す。
 この変換処理を次の画像を表示するまでの間で分散処理を行えばもしかすると引っ掛り
 を無くす事すら出来るかもしれないけど、さすがにそこまでやる必要性を感じないので
 やってません。


Rev.20100814追記
 　偶にアニメーションGIFを表示させると使用可能メモリが減少する場合があったので
 調べてみたらどうやらlibungifの不都合らしい。
 具体的にはローカルカラーマップを使っている画像を開くとローカルカラーマップが
 完全には開放されないって事らしい。
 区別の仕方は画像内部情報のColorMapが0ではないモノを開くとメモリリークします。

 　前回はオンメモリでアニメーションGIFを表示させようとしていたため、モノによっ
 てはメモリ不足で表示できない事があったので、今回はメモリが足りない場合は随時
 画像を展開しながら表示するようにしました。
 しかし、これを行うためには予めGIF内の画像数を知っておく必要があるんだけど、
 これがなかなかに難題でしていろいろ方法を探したんだけど、結局は一度GIF画像を
 最後まで展開しないと取得できないらしい。
 画像ヘッダのどっかに画像数をチラッとでも書いてくれればこんな無駄な事をしなく
 て済むってのに…。


Rev.20100911追記
 　HBLへの対応が出来た…かな？
 HBLのリビジョンによって動作が違うので、本当にこれで大丈夫なのかいまいち自信が
 無いんだよね。
 　HBLで起動時に問答無用で落ちるのは PSP_HEAP_SIZE_KB() にマイナスの値を指定し
 ていたかららしい。
 このマイナスの値とは「最大メモリ容量から指定値だけ引いた容量を malloc() 用に
 確保する」って意味なので、この最大メモリ容量の取得に問題があるんだろう。
 現在は固定値を確保するようにしています。
 ちなみにここで確保されなかったメモリにモジュールがロードされるっぽいので、
 モジュールをロードするならそれなりの容量を空けておく必要があるみたい。
 　あと、フォルダ名に２バイト文字が使えないのでログフォルダ周りにも手を入れて
 います。

 　BGMファイラーでフォルダ名が「表」で終わるフォルダに移動しようとすると妙な
 動作が起きてました。
 これは sceIoDopen() で発生しているようで、フォルダ名の最後が「\」で終わると
 ダメらしいです。
 これの対応法は最後の「\」を「\\」にするとうまく動くって事らしい。


Rev.20100921追記
 　HBL R101より PSP_HEAP_SIZE_KB() にマイナスの値を指定できるようになったので
 メモリ確保部分を元に戻す。


Rev.20100926追記
 　アニメーションGIF再生時のメモリリーク問題は多分解決できたと思う。
 DGifGetImageDesc() を実行した際にローカルカラーマップが使われているとそれ用
 のメモリを内部的に確保するんだけど、これが開放されてないっぽかった。
 現在は１画像毎にカラーマップを使い終わった時点でローカルカラーマップを強制的
 に開放（FreeMapObject(GifFile->Image.ColorMap);GifFile->Image.ColorMap = 
 NULL;）させてます。


Rev.20101011追記
 　入力履歴はPSPメモ帳の処理ルーチンを流用しています。

 　外部板の登録で問題になるのがBBS名称と板名称で、これをどうやって取得するかが
 悩みどころでして。
 現在は bbsmenu.html で取得する（VIP別荘）か内部的にリストを持つ（まちBBS）か、
 使用者に丸投げ（その他）するかになってます。
 外部に設定ファイルでも用意すべきなんだろうか…。


Rev.20101017追記
 　外部板の登録ファイル（BBS.DAT）を用意しといたので、必要ならこれにBBSを記載
 してくださいな。


Rev.20101027追記
 　HBL環境下でディレクトリを扱う場合の文字コードはUTF8って事らしい。
 UTF8とはASCIIコード（00～7F）はそのままで、全角文字はUCSを2～3バイトに分割し
 て表すコード体系なので、これをシフトJISとして扱うと全角文字が文字化けしてしま
 う。
 これまではシフトJISでディレクトリを扱おうとしていたため全角文字が使えなかった
 ようだ。
 　さて、CFW環境下ではシフトJISだったモノがHBL環境下ではUTF8…、この違いは果た
 して何処から来てるのだろう？
 本来はUTF8だったモノがCFWによりシフトJISに変換されていた？
 本来はシフトJISだったモノがHBLによりUTF8に変換されている？
 OFW自体が実行環境（言語設定？）によりUTF8とシフトJISで切り替えている？
 まあコンバート自体はそんなに難しくは無いけど、環境によって文字コードが違うっ
 てのはかなり面倒なんだよなぁ。


Rev.20101101追記
 　念願の.zipファイル展開に対応。
 参考にしたのはAnonymousTipster's氏の Unzip Plugin/App で、これのzip関連のみ
 を取り出して実装してます。
 アーカイブの展開には時間が掛かるから、途中経過の表示くらいは付けたいなぁ。


Rev.20101107追記
 　.zipファイル展開はこんなもんでしょ。
 HBL環境への対応もこれで完了したハズ。
 後は何かあったかな？


Rev.20101121追記
 　.rarファイル展開を実装。
 参考にしたのはやはりAnonymousTipster's氏の Unzip Plugin/App です。
 ただし、この実装はかなりやっつけです。
 ソースがc++で記述されている上に実に読みにくい＆ファイルが多いのでこれ以上手を
 入れたくない。
 HBL環境下での全角文字ファイル名文字化け問題も対処してません。
 なんか.rarファイルによっては展開が正常に行われないモノもあるようなんだけど
 放置します。


Rev.20101231追記
 　今回はBGM処理に関する修正がメインです。
 これまでBGM処理は良く分からない挙動をしていたので放置してたんだけど、そのまま
 にしておくのもアレなので本気で取り組んで見ました。
 　良く分からない挙動とはファイルによっては次のファイルに移らないってヤツで、
 この理由が長らく分からなかった。
 MP3エンコードに問題があるのか再生処理に問題があるのかすら分からない。
 なにしろ再生処理がマルチスレッド化されてるもんだからそう簡単にデバグする事が
 できなかったんだよね。
 　で、いろいろやってやっと原因を突き止めたものの、そのあまりに単純な原因に暫
 らく絶句してしまったよ。
 原因は拡張子を小文字でしかチェックしてなかったもんだから大文字で".MP3"となっ
 てると認識しないという基本的なミス…
 これが判明するのに１ヶ月くらい時間が掛かったという(泣

 　プレイリスト機能とかランダム再生は曲数が増えてくると消費メモリがバカになら
 ないので搭載しません。
 メモリースティックを利用すればメモリ消費を回避できるかもしれないけど、そこまで
 するような機能でもないと思うので。


Rev.20110212追記
 　2chの仕様変更に振り回されてます。
 取り合えず冒険の書規制には対応したけど、この仕様で大丈夫かなぁ…
 書き込み時に冒険の書規制に引っ掛った場合、cookieで返される「HAP=」の値を保存
 して次回の書き込み時にその値をcookieに追加するようにしたが、今回は良いとしても
 今後新しい項目がcookieに追加されるような場合にはやっぱり修正が必要になる。
 もっと汎用的な対応をするべきかなぁ。

 　後はBeの仕様変更への対応があるんだけど、こちらは最近やっと自動ログインさせる
 方法が分かったので近々対応します。


Rev.20110227追記
 　そうか、monazilla.orgに2chのいろんな仕様が書いてあったのか。
 Beへのログイン方法もココに明記されてた…、一月くらい方法を探してたのに無駄な
 時間を過ごしてしまったなぁ。


Rev.20110321追記
 　公共APに接続するためのログイン認証ってBasic認証やDigest認証ではないのか。
 せっかくBasic認証を実装したのに意味が無いなぁ。
 　ログインページにアクセスするためにはhttpsでアクセスしなくちゃいけないので
 どうしてもOpenSSLが必要になるんだが、今のところこちらの環境ではOpenSSLが使え
 ないのでログイン認証に対応するのは無理、か。


Rev.20110330追記
 　書き込み時の隠しクッキーの自動取得は、書き込み確認画面の文字列から「type=hi
 dden name="」という一連の文字列を探し、この直後の値を取得しています。
 今後、書き込み確認画面の文字列が変更されたりしてこの手法が適用できなくなる事も
 予想できますが…まぁその時はその時ってことで。


Rev.20110331追記
 　忍法帖でLvが2から上がらない原因はHAPの値を更新していないからだったらしい。
 HAPの値は書き込みを行うたびに新しい値が渡されてくるのか。
 てっきり初回にHAPを取得したら後はそのまま同じ値を使い続けるもんだとばかり思っ
 てた。


Rev.20110501追記
 　アプリに署名を行う為には makefile で BUILD_PRX = 1 を指定する必要があるんだ
 けど、これを指定するとヒープメモリが2MBほど余計に必要になるみたい。
 このせいで署名版は内蔵ブラウザが起動出来なくなってた。

 　2ch広告スレが表示できないのはdatファイル名がint型で扱える値の範囲を超えてい
 るから。
 これに対応させるには少々どころではない修正が必要になるので断念。

 　いくつか残っていたバグの修正と画像ファイルの直接取得可能サイトの追加。
 以上をもって修正作業は終了…って事にしたいなぁ。


Rev.20130109追記
  　急に板一覧の取得が出来なくなったので久々に更新。
  1/6より板一覧の書式がちょっと変わって、各行の間に空行が入るようになったため
  に異常動作を起こしていた。
  そういえばここの処理には一度も手を入れてなかったハズだから、もしかしてowata
  系ブラウザは全て板一覧が取得できなくなってたのかな？


                              村中 昭雄(STEAR)
                       E-mail : YHW02344@nifty.ne.jp

          Home Page : http://homepage2.nifty.com/stear/index.html


